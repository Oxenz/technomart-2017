function initMap(){var e=new google.maps.Map(document.getElementById("map-canvas"),{center:{lat:59.9388,lng:30.323073},scrollwheel:!1,disableDefaultUI:!0,zoom:17}),o=(new google.maps.Marker({position:{lat:59.9388,lng:30.323073},map:e,title:'Мы здесь "ул. Б. Конюшенная, д. 19"'}),new google.maps.Map(document.getElementById("map-full"),{center:{lat:59.941384,lng:30.310371},zoom:16})),a="img/markerzzz.png";new google.maps.Marker({position:{lat:59.9388,lng:30.323073},map:o,title:'Мы здесь "ул. Б. Конюшенная, д. 19"',icon:a})}var $location=document.querySelector(".btn-location"),$feedback=document.querySelector(".popup-feedback"),$close1=document.querySelector(".close-1"),$form=$feedback.querySelector("form"),$login=$feedback.querySelector("[name=feedback-login]"),$email=$feedback.querySelector("[name=feedback-email]"),$storage=localStorage.getItem("login"),$overlay=document.querySelector(".modal-overlay");$location.addEventListener("click",function(e){e.preventDefault(),$feedback.classList.toggle("open"),$storage?($login.value=$storage,$email.focus()):$login.focus(),$overlay.style.display="block",console.log("stage 1.1 (отмена перехода по ссылке, добавление .open), work")}),window.addEventListener("keydown",function(e){27===e.keyCode&&($overlay.style.display="none",$feedback.classList.remove("open"),$popupmap.classList.remove("open"),$additem.classList.remove("open"),$additem.classList.remove("animate"),$popupmap.classList.remove("animate"),$feedback.classList.remove("popup-error"),console.log("stage 1.2 (скрытие .overlay и удаление .open .animate .popup-error по ESC), work"))}),$form.addEventListener("submit",function(e){$login.value&&$email.value?(localStorage.setItem("login",$login.value),setTimeout('$overlay.style.display="none"',1500)):(e.preventDefault(),console.log("Какой-то из 2-ух полей не заполнено, JUST DO IT"),$feedback.classList.remove("popup-error"),$feedback.offsetWidth=$feedback.offsetWidth,$feedback.classList.add("popup-error")),console.log("stage 1.3 (проверка полей ввода и создание ключа localStorage), work")}),$overlay.addEventListener("click",function(){$overlay.style.display="none",$feedback.classList.remove("open"),$popupmap.classList.remove("open"),$popupmap.classList.remove("animate"),$feedback.classList.remove("popup-error"),console.log("stage 1.4 (скрытие .overlay и удаление .open .animate .popup-error по l-click), work")}),$close1.addEventListener("click",function(){$overlay.style.display="none",$feedback.classList.remove("open"),$feedback.classList.remove("popup-error"),console.log("stage 1.5 (скрытие .overlay и удаление .open .popup-error по .close), work")});var $items=document.querySelector(".items"),$additem=document.querySelector(".popup-additem"),$continue=document.querySelector(".btn-additem-continue"),$close2=document.querySelector(".close-2");$items&&$items.addEventListener("click",function(e){var o=e.target;o.classList.contains("btn-buy")&&(e.preventDefault(),$additem.classList.add("open"),$additem.classList.add("animate"),console.log("stage 2.1 (добавление .open и .animate), work"))}),$close2.addEventListener("click",function(){$additem.classList.remove("open"),$additem.classList.remove("animate"),console.log("stage 2.2 (удаление .open и .animate по .close), work")}),$continue.addEventListener("click",function(){$additem.classList.remove("open"),$additem.classList.remove("animate"),console.log("stage 2.3 (удаление .open и .animate по .btn-additem-continue)")});var $mapcanvas=document.querySelector("#map-canvas"),$popupmap=document.querySelector(".popup-map"),$close3=document.querySelector(".close-3");$mapcanvas.addEventListener("click",function(e){e.preventDefault(),$overlay.style.display="block",$popupmap.classList.add("open"),$popupmap.classList.add("animate"),window.dispatchEvent(new Event("resize")),console.log("stage 3.1 (добавление для большой карты классов .open и .animate), work")}),$close3.addEventListener("click",function(){$overlay.style.display="none",$popupmap.classList.remove("open"),$popupmap.classList.remove("animate"),console.log("stage 3.2 (удаление для большой карты классов .open и .animate, изменение display на none), work")});